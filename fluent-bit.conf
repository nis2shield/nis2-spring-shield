# Fluent Bit Configuration for NIS2 Spring Shield Integration Test
#
# This configuration:
# 1. Receives logs from Spring Boot via Fluentd protocol
# 2. Parses JSON logs
# 3. Outputs to stdout for verification (and optionally to OpenSearch)

[SERVICE]
    Flush        1
    Log_Level    info
    Parsers_File parsers.conf

[INPUT]
    Name        forward
    Listen      0.0.0.0
    Port        24224

[FILTER]
    Name        parser
    Match       spring.*
    Key_Name    log
    Parser      json
    Reserve_Data On

[OUTPUT]
    Name        stdout
    Match       *
    Format      json_lines

# Uncomment to also send to OpenSearch:
# [OUTPUT]
#     Name            opensearch
#     Match           *
#     Host            opensearch
#     Port            9200
#     Index           nis2-spring-logs
#     Type            _doc
#     Suppress_Type_Name On
